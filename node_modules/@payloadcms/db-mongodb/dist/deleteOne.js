"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "deleteOne", {
    enumerable: true,
    get: function() {
        return deleteOne;
    }
});
const _sanitizeInternalFields = /*#__PURE__*/ _interop_require_default(require("./utilities/sanitizeInternalFields"));
const _withSession = require("./withSession");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const deleteOne = async function deleteOne({ collection, req = {}, where }) {
    const Model = this.collections[collection];
    const options = await (0, _withSession.withSession)(this, req);
    const query = await Model.buildQuery({
        payload: this.payload,
        where
    });
    let doc = await Model.findOneAndDelete(query, options).lean();
    doc = this.jsonParse ? JSON.parse(JSON.stringify(doc)) : doc;
    return (0, _sanitizeInternalFields.default)(doc);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9kZWxldGVPbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBEZWxldGVPbmUgfSBmcm9tICdwYXlsb2FkL2RhdGFiYXNlJ1xuaW1wb3J0IHR5cGUgeyBQYXlsb2FkUmVxdWVzdCB9IGZyb20gJ3BheWxvYWQvdHlwZXMnXG5cbmltcG9ydCB0eXBlIHsgTW9uZ29vc2VBZGFwdGVyIH0gZnJvbSAnLidcblxuaW1wb3J0IHNhbml0aXplSW50ZXJuYWxGaWVsZHMgZnJvbSAnLi91dGlsaXRpZXMvc2FuaXRpemVJbnRlcm5hbEZpZWxkcydcbmltcG9ydCB7IHdpdGhTZXNzaW9uIH0gZnJvbSAnLi93aXRoU2Vzc2lvbidcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZU9uZTogRGVsZXRlT25lID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlT25lKFxuICB0aGlzOiBNb25nb29zZUFkYXB0ZXIsXG4gIHsgY29sbGVjdGlvbiwgcmVxID0ge30gYXMgUGF5bG9hZFJlcXVlc3QsIHdoZXJlIH0sXG4pIHtcbiAgY29uc3QgTW9kZWwgPSB0aGlzLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25dXG4gIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCB3aXRoU2Vzc2lvbih0aGlzLCByZXEpXG5cbiAgY29uc3QgcXVlcnkgPSBhd2FpdCBNb2RlbC5idWlsZFF1ZXJ5KHtcbiAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWQsXG4gICAgd2hlcmUsXG4gIH0pXG5cbiAgbGV0IGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRPbmVBbmREZWxldGUocXVlcnksIG9wdGlvbnMpLmxlYW4oKVxuXG4gIGRvYyA9IHRoaXMuanNvblBhcnNlID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkb2MpKSA6IGRvY1xuXG4gIHJldHVybiBzYW5pdGl6ZUludGVybmFsRmllbGRzKGRvYylcbn1cbiJdLCJuYW1lcyI6WyJkZWxldGVPbmUiLCJjb2xsZWN0aW9uIiwicmVxIiwid2hlcmUiLCJNb2RlbCIsImNvbGxlY3Rpb25zIiwib3B0aW9ucyIsIndpdGhTZXNzaW9uIiwicXVlcnkiLCJidWlsZFF1ZXJ5IiwicGF5bG9hZCIsImRvYyIsImZpbmRPbmVBbmREZWxldGUiLCJsZWFuIiwianNvblBhcnNlIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5Iiwic2FuaXRpemVJbnRlcm5hbEZpZWxkcyJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBUWFBOzs7ZUFBQUE7OzsrRUFIc0I7NkJBQ1A7Ozs7OztBQUVyQixNQUFNQSxZQUF1QixlQUFlQSxVQUVqRCxFQUFFQyxVQUFVLEVBQUVDLE1BQU0sQ0FBQyxDQUFtQixFQUFFQyxLQUFLLEVBQUU7SUFFakQsTUFBTUMsUUFBUSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0osV0FBVztJQUMxQyxNQUFNSyxVQUFVLE1BQU1DLElBQUFBLHdCQUFXLEVBQUMsSUFBSSxFQUFFTDtJQUV4QyxNQUFNTSxRQUFRLE1BQU1KLE1BQU1LLFVBQVUsQ0FBQztRQUNuQ0MsU0FBUyxJQUFJLENBQUNBLE9BQU87UUFDckJQO0lBQ0Y7SUFFQSxJQUFJUSxNQUFNLE1BQU1QLE1BQU1RLGdCQUFnQixDQUFDSixPQUFPRixTQUFTTyxJQUFJO0lBRTNERixNQUFNLElBQUksQ0FBQ0csU0FBUyxHQUFHQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLFNBQVMsQ0FBQ04sUUFBUUE7SUFFekQsT0FBT08sSUFBQUEsK0JBQXNCLEVBQUNQO0FBQ2hDIn0=