"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "createGlobal", {
    enumerable: true,
    get: function() {
        return createGlobal;
    }
});
const _sanitizeInternalFields = /*#__PURE__*/ _interop_require_default(require("./utilities/sanitizeInternalFields"));
const _withSession = require("./withSession");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const createGlobal = async function createGlobal({ slug, data, req = {} }) {
    const Model = this.globals;
    const global = {
        globalType: slug,
        ...data
    };
    const options = await (0, _withSession.withSession)(this, req);
    let [result] = await Model.create([
        global
    ], options);
    result = this.jsonParse ? JSON.parse(JSON.stringify(result)) : result.toObject();
    result = (0, _sanitizeInternalFields.default)(result);
    return result;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVHbG9iYWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDcmVhdGVHbG9iYWwgfSBmcm9tICdwYXlsb2FkL2RhdGFiYXNlJ1xuaW1wb3J0IHR5cGUgeyBQYXlsb2FkUmVxdWVzdCB9IGZyb20gJ3BheWxvYWQvdHlwZXMnXG5cbmltcG9ydCB0eXBlIHsgTW9uZ29vc2VBZGFwdGVyIH0gZnJvbSAnLidcblxuaW1wb3J0IHNhbml0aXplSW50ZXJuYWxGaWVsZHMgZnJvbSAnLi91dGlsaXRpZXMvc2FuaXRpemVJbnRlcm5hbEZpZWxkcydcbmltcG9ydCB7IHdpdGhTZXNzaW9uIH0gZnJvbSAnLi93aXRoU2Vzc2lvbidcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUdsb2JhbDogQ3JlYXRlR2xvYmFsID0gYXN5bmMgZnVuY3Rpb24gY3JlYXRlR2xvYmFsKFxuICB0aGlzOiBNb25nb29zZUFkYXB0ZXIsXG4gIHsgc2x1ZywgZGF0YSwgcmVxID0ge30gYXMgUGF5bG9hZFJlcXVlc3QgfSxcbikge1xuICBjb25zdCBNb2RlbCA9IHRoaXMuZ2xvYmFsc1xuICBjb25zdCBnbG9iYWwgPSB7XG4gICAgZ2xvYmFsVHlwZTogc2x1ZyxcbiAgICAuLi5kYXRhLFxuICB9XG4gIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCB3aXRoU2Vzc2lvbih0aGlzLCByZXEpXG5cbiAgbGV0IFtyZXN1bHRdID0gKGF3YWl0IE1vZGVsLmNyZWF0ZShbZ2xvYmFsXSwgb3B0aW9ucykpIGFzIGFueVxuXG4gIHJlc3VsdCA9IHRoaXMuanNvblBhcnNlID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHQpKSA6IHJlc3VsdC50b09iamVjdCgpXG5cbiAgcmVzdWx0ID0gc2FuaXRpemVJbnRlcm5hbEZpZWxkcyhyZXN1bHQpXG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUdsb2JhbCIsInNsdWciLCJkYXRhIiwicmVxIiwiTW9kZWwiLCJnbG9iYWxzIiwiZ2xvYmFsIiwiZ2xvYmFsVHlwZSIsIm9wdGlvbnMiLCJ3aXRoU2Vzc2lvbiIsInJlc3VsdCIsImNyZWF0ZSIsImpzb25QYXJzZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInRvT2JqZWN0Iiwic2FuaXRpemVJbnRlcm5hbEZpZWxkcyJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBUWFBOzs7ZUFBQUE7OzsrRUFIc0I7NkJBQ1A7Ozs7OztBQUVyQixNQUFNQSxlQUE2QixlQUFlQSxhQUV2RCxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsTUFBTSxDQUFDLENBQW1CLEVBQUU7SUFFMUMsTUFBTUMsUUFBUSxJQUFJLENBQUNDLE9BQU87SUFDMUIsTUFBTUMsU0FBUztRQUNiQyxZQUFZTjtRQUNaLEdBQUdDLElBQUk7SUFDVDtJQUNBLE1BQU1NLFVBQVUsTUFBTUMsSUFBQUEsd0JBQVcsRUFBQyxJQUFJLEVBQUVOO0lBRXhDLElBQUksQ0FBQ08sT0FBTyxHQUFJLE1BQU1OLE1BQU1PLE1BQU0sQ0FBQztRQUFDTDtLQUFPLEVBQUVFO0lBRTdDRSxTQUFTLElBQUksQ0FBQ0UsU0FBUyxHQUFHQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLFNBQVMsQ0FBQ0wsV0FBV0EsT0FBT00sUUFBUTtJQUU5RU4sU0FBU08sSUFBQUEsK0JBQXNCLEVBQUNQO0lBRWhDLE9BQU9BO0FBQ1QifQ==