"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "withSession", {
    enumerable: true,
    get: function() {
        return withSession;
    }
});
async function withSession(db, req) {
    let transactionID = req.transactionID;
    if (transactionID instanceof Promise) {
        transactionID = await req.transactionID;
    }
    if (req) return db.sessions[transactionID] ? {
        session: db.sessions[transactionID]
    } : {};
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy93aXRoU2Vzc2lvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENsaWVudFNlc3Npb24gfSBmcm9tICdtb25nb29zZSdcbmltcG9ydCB0eXBlIHsgUGF5bG9hZFJlcXVlc3QgfSBmcm9tICdwYXlsb2FkL3R5cGVzJ1xuXG5pbXBvcnQgdHlwZSB7IE1vbmdvb3NlQWRhcHRlciB9IGZyb20gJy4vaW5kZXgnXG5cbi8qKlxuICogcmV0dXJucyB0aGUgc2Vzc2lvbiBiZWxvbmdpbmcgdG8gdGhlIHRyYW5zYWN0aW9uIG9mIHRoZSByZXEuc2Vzc2lvbiBpZiBleGlzdHNcbiAqIEByZXR1cm5zIENsaWVudFNlc3Npb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhTZXNzaW9uKFxuICBkYjogTW9uZ29vc2VBZGFwdGVyLFxuICByZXE6IFBheWxvYWRSZXF1ZXN0LFxuKTogUHJvbWlzZTx7IHNlc3Npb246IENsaWVudFNlc3Npb24gfSB8IG9iamVjdD4ge1xuICBsZXQgdHJhbnNhY3Rpb25JRCA9IHJlcS50cmFuc2FjdGlvbklEXG5cbiAgaWYgKHRyYW5zYWN0aW9uSUQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgdHJhbnNhY3Rpb25JRCA9IGF3YWl0IHJlcS50cmFuc2FjdGlvbklEXG4gIH1cblxuICBpZiAocmVxKSByZXR1cm4gZGIuc2Vzc2lvbnNbdHJhbnNhY3Rpb25JRF0gPyB7IHNlc3Npb246IGRiLnNlc3Npb25zW3RyYW5zYWN0aW9uSURdIH0gOiB7fVxufVxuIl0sIm5hbWVzIjpbIndpdGhTZXNzaW9uIiwiZGIiLCJyZXEiLCJ0cmFuc2FjdGlvbklEIiwiUHJvbWlzZSIsInNlc3Npb25zIiwic2Vzc2lvbiJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBU3NCQTs7O2VBQUFBOzs7QUFBZixlQUFlQSxZQUNwQkMsRUFBbUIsRUFDbkJDLEdBQW1CO0lBRW5CLElBQUlDLGdCQUFnQkQsSUFBSUMsYUFBYTtJQUVyQyxJQUFJQSx5QkFBeUJDLFNBQVM7UUFDcENELGdCQUFnQixNQUFNRCxJQUFJQyxhQUFhO0lBQ3pDO0lBRUEsSUFBSUQsS0FBSyxPQUFPRCxHQUFHSSxRQUFRLENBQUNGLGNBQWMsR0FBRztRQUFFRyxTQUFTTCxHQUFHSSxRQUFRLENBQUNGLGNBQWM7SUFBQyxJQUFJLENBQUM7QUFDMUYifQ==