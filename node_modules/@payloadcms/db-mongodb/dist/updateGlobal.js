"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "updateGlobal", {
    enumerable: true,
    get: function() {
        return updateGlobal;
    }
});
const _sanitizeInternalFields = /*#__PURE__*/ _interop_require_default(require("./utilities/sanitizeInternalFields"));
const _withSession = require("./withSession");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const updateGlobal = async function updateGlobal({ slug, data, req = {} }) {
    const Model = this.globals;
    const options = {
        ...await (0, _withSession.withSession)(this, req),
        lean: true,
        new: true
    };
    let result;
    result = await Model.findOneAndUpdate({
        globalType: slug
    }, data, options);
    result = this.jsonParse ? JSON.parse(JSON.stringify(result)) : result;
    result = (0, _sanitizeInternalFields.default)(result);
    return result;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91cGRhdGVHbG9iYWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBVcGRhdGVHbG9iYWwgfSBmcm9tICdwYXlsb2FkL2RhdGFiYXNlJ1xuaW1wb3J0IHR5cGUgeyBQYXlsb2FkUmVxdWVzdCB9IGZyb20gJ3BheWxvYWQvdHlwZXMnXG5cbmltcG9ydCB0eXBlIHsgTW9uZ29vc2VBZGFwdGVyIH0gZnJvbSAnLidcblxuaW1wb3J0IHNhbml0aXplSW50ZXJuYWxGaWVsZHMgZnJvbSAnLi91dGlsaXRpZXMvc2FuaXRpemVJbnRlcm5hbEZpZWxkcydcbmltcG9ydCB7IHdpdGhTZXNzaW9uIH0gZnJvbSAnLi93aXRoU2Vzc2lvbidcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUdsb2JhbDogVXBkYXRlR2xvYmFsID0gYXN5bmMgZnVuY3Rpb24gdXBkYXRlR2xvYmFsKFxuICB0aGlzOiBNb25nb29zZUFkYXB0ZXIsXG4gIHsgc2x1ZywgZGF0YSwgcmVxID0ge30gYXMgUGF5bG9hZFJlcXVlc3QgfSxcbikge1xuICBjb25zdCBNb2RlbCA9IHRoaXMuZ2xvYmFsc1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIC4uLihhd2FpdCB3aXRoU2Vzc2lvbih0aGlzLCByZXEpKSxcbiAgICBsZWFuOiB0cnVlLFxuICAgIG5ldzogdHJ1ZSxcbiAgfVxuXG4gIGxldCByZXN1bHRcblxuICByZXN1bHQgPSBhd2FpdCBNb2RlbC5maW5kT25lQW5kVXBkYXRlKHsgZ2xvYmFsVHlwZTogc2x1ZyB9LCBkYXRhLCBvcHRpb25zKVxuXG4gIHJlc3VsdCA9IHRoaXMuanNvblBhcnNlID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHQpKSA6IHJlc3VsdFxuXG4gIHJlc3VsdCA9IHNhbml0aXplSW50ZXJuYWxGaWVsZHMocmVzdWx0KVxuXG4gIHJldHVybiByZXN1bHRcbn1cbiJdLCJuYW1lcyI6WyJ1cGRhdGVHbG9iYWwiLCJzbHVnIiwiZGF0YSIsInJlcSIsIk1vZGVsIiwiZ2xvYmFscyIsIm9wdGlvbnMiLCJ3aXRoU2Vzc2lvbiIsImxlYW4iLCJuZXciLCJyZXN1bHQiLCJmaW5kT25lQW5kVXBkYXRlIiwiZ2xvYmFsVHlwZSIsImpzb25QYXJzZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInNhbml0aXplSW50ZXJuYWxGaWVsZHMiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkFRYUE7OztlQUFBQTs7OytFQUhzQjs2QkFDUDs7Ozs7O0FBRXJCLE1BQU1BLGVBQTZCLGVBQWVBLGFBRXZELEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxNQUFNLENBQUMsQ0FBbUIsRUFBRTtJQUUxQyxNQUFNQyxRQUFRLElBQUksQ0FBQ0MsT0FBTztJQUMxQixNQUFNQyxVQUFVO1FBQ2QsR0FBSSxNQUFNQyxJQUFBQSx3QkFBVyxFQUFDLElBQUksRUFBRUosSUFBSTtRQUNoQ0ssTUFBTTtRQUNOQyxLQUFLO0lBQ1A7SUFFQSxJQUFJQztJQUVKQSxTQUFTLE1BQU1OLE1BQU1PLGdCQUFnQixDQUFDO1FBQUVDLFlBQVlYO0lBQUssR0FBR0MsTUFBTUk7SUFFbEVJLFNBQVMsSUFBSSxDQUFDRyxTQUFTLEdBQUdDLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsU0FBUyxDQUFDTixXQUFXQTtJQUUvREEsU0FBU08sSUFBQUEsK0JBQXNCLEVBQUNQO0lBRWhDLE9BQU9BO0FBQ1QifQ==