"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "commitTransaction", {
    enumerable: true,
    get: function() {
        return commitTransaction;
    }
});
const commitTransaction = async function commitTransaction(id) {
    if (id instanceof Promise) return;
    if (!this.sessions[id]?.inTransaction()) {
        return;
    }
    await this.sessions[id].commitTransaction();
    try {
        await this.sessions[id].endSession();
    } catch (error) {
    // ending sessions is only best effort and won't impact anything if it fails since the transaction was committed
    }
    delete this.sessions[id];
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90cmFuc2FjdGlvbnMvY29tbWl0VHJhbnNhY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb21taXRUcmFuc2FjdGlvbiB9IGZyb20gJ3BheWxvYWQvZGF0YWJhc2UnXG5cbmV4cG9ydCBjb25zdCBjb21taXRUcmFuc2FjdGlvbjogQ29tbWl0VHJhbnNhY3Rpb24gPSBhc3luYyBmdW5jdGlvbiBjb21taXRUcmFuc2FjdGlvbihpZCkge1xuICBpZiAoaWQgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm5cblxuICBpZiAoIXRoaXMuc2Vzc2lvbnNbaWRdPy5pblRyYW5zYWN0aW9uKCkpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGF3YWl0IHRoaXMuc2Vzc2lvbnNbaWRdLmNvbW1pdFRyYW5zYWN0aW9uKClcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLnNlc3Npb25zW2lkXS5lbmRTZXNzaW9uKClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBlbmRpbmcgc2Vzc2lvbnMgaXMgb25seSBiZXN0IGVmZm9ydCBhbmQgd29uJ3QgaW1wYWN0IGFueXRoaW5nIGlmIGl0IGZhaWxzIHNpbmNlIHRoZSB0cmFuc2FjdGlvbiB3YXMgY29tbWl0dGVkXG4gIH1cbiAgZGVsZXRlIHRoaXMuc2Vzc2lvbnNbaWRdXG59XG4iXSwibmFtZXMiOlsiY29tbWl0VHJhbnNhY3Rpb24iLCJpZCIsIlByb21pc2UiLCJzZXNzaW9ucyIsImluVHJhbnNhY3Rpb24iLCJlbmRTZXNzaW9uIiwiZXJyb3IiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkFFYUE7OztlQUFBQTs7O0FBQU4sTUFBTUEsb0JBQXVDLGVBQWVBLGtCQUFrQkMsRUFBRTtJQUNyRixJQUFJQSxjQUFjQyxTQUFTO0lBRTNCLElBQUksQ0FBQyxJQUFJLENBQUNDLFFBQVEsQ0FBQ0YsR0FBRyxFQUFFRyxpQkFBaUI7UUFDdkM7SUFDRjtJQUVBLE1BQU0sSUFBSSxDQUFDRCxRQUFRLENBQUNGLEdBQUcsQ0FBQ0QsaUJBQWlCO0lBQ3pDLElBQUk7UUFDRixNQUFNLElBQUksQ0FBQ0csUUFBUSxDQUFDRixHQUFHLENBQUNJLFVBQVU7SUFDcEMsRUFBRSxPQUFPQyxPQUFPO0lBQ2QsZ0hBQWdIO0lBQ2xIO0lBQ0EsT0FBTyxJQUFJLENBQUNILFFBQVEsQ0FBQ0YsR0FBRztBQUMxQiJ9