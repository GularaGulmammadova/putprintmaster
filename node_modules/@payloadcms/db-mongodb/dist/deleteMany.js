"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "deleteMany", {
    enumerable: true,
    get: function() {
        return deleteMany;
    }
});
const _withSession = require("./withSession");
const deleteMany = async function deleteMany({ collection, req = {}, where }) {
    const Model = this.collections[collection];
    const options = {
        ...await (0, _withSession.withSession)(this, req),
        lean: true
    };
    const query = await Model.buildQuery({
        payload: this.payload,
        where
    });
    await Model.deleteMany(query, options);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9kZWxldGVNYW55LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRGVsZXRlTWFueSB9IGZyb20gJ3BheWxvYWQvZGF0YWJhc2UnXG5pbXBvcnQgdHlwZSB7IFBheWxvYWRSZXF1ZXN0IH0gZnJvbSAncGF5bG9hZC90eXBlcydcblxuaW1wb3J0IHR5cGUgeyBNb25nb29zZUFkYXB0ZXIgfSBmcm9tICcuJ1xuXG5pbXBvcnQgeyB3aXRoU2Vzc2lvbiB9IGZyb20gJy4vd2l0aFNlc3Npb24nXG5cbmV4cG9ydCBjb25zdCBkZWxldGVNYW55OiBEZWxldGVNYW55ID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlTWFueShcbiAgdGhpczogTW9uZ29vc2VBZGFwdGVyLFxuICB7IGNvbGxlY3Rpb24sIHJlcSA9IHt9IGFzIFBheWxvYWRSZXF1ZXN0LCB3aGVyZSB9LFxuKSB7XG4gIGNvbnN0IE1vZGVsID0gdGhpcy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXVxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIC4uLihhd2FpdCB3aXRoU2Vzc2lvbih0aGlzLCByZXEpKSxcbiAgICBsZWFuOiB0cnVlLFxuICB9XG5cbiAgY29uc3QgcXVlcnkgPSBhd2FpdCBNb2RlbC5idWlsZFF1ZXJ5KHtcbiAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWQsXG4gICAgd2hlcmUsXG4gIH0pXG5cbiAgYXdhaXQgTW9kZWwuZGVsZXRlTWFueShxdWVyeSwgb3B0aW9ucylcbn1cbiJdLCJuYW1lcyI6WyJkZWxldGVNYW55IiwiY29sbGVjdGlvbiIsInJlcSIsIndoZXJlIiwiTW9kZWwiLCJjb2xsZWN0aW9ucyIsIm9wdGlvbnMiLCJ3aXRoU2Vzc2lvbiIsImxlYW4iLCJxdWVyeSIsImJ1aWxkUXVlcnkiLCJwYXlsb2FkIl0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBT2FBOzs7ZUFBQUE7Ozs2QkFGZTtBQUVyQixNQUFNQSxhQUF5QixlQUFlQSxXQUVuRCxFQUFFQyxVQUFVLEVBQUVDLE1BQU0sQ0FBQyxDQUFtQixFQUFFQyxLQUFLLEVBQUU7SUFFakQsTUFBTUMsUUFBUSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0osV0FBVztJQUMxQyxNQUFNSyxVQUFVO1FBQ2QsR0FBSSxNQUFNQyxJQUFBQSx3QkFBVyxFQUFDLElBQUksRUFBRUwsSUFBSTtRQUNoQ00sTUFBTTtJQUNSO0lBRUEsTUFBTUMsUUFBUSxNQUFNTCxNQUFNTSxVQUFVLENBQUM7UUFDbkNDLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1FBQ3JCUjtJQUNGO0lBRUEsTUFBTUMsTUFBTUosVUFBVSxDQUFDUyxPQUFPSDtBQUNoQyJ9