"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "deleteVersions", {
    enumerable: true,
    get: function() {
        return deleteVersions;
    }
});
const _withSession = require("./withSession");
const deleteVersions = async function deleteVersions({ collection, locale, req = {}, where }) {
    const VersionsModel = this.versions[collection];
    const options = {
        ...await (0, _withSession.withSession)(this, req),
        lean: true
    };
    const query = await VersionsModel.buildQuery({
        locale,
        payload: this.payload,
        where
    });
    await VersionsModel.deleteMany(query, options);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9kZWxldGVWZXJzaW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IERlbGV0ZVZlcnNpb25zIH0gZnJvbSAncGF5bG9hZC9kYXRhYmFzZSdcbmltcG9ydCB0eXBlIHsgUGF5bG9hZFJlcXVlc3QgfSBmcm9tICdwYXlsb2FkL3R5cGVzJ1xuXG5pbXBvcnQgdHlwZSB7IE1vbmdvb3NlQWRhcHRlciB9IGZyb20gJy4nXG5cbmltcG9ydCB7IHdpdGhTZXNzaW9uIH0gZnJvbSAnLi93aXRoU2Vzc2lvbidcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZVZlcnNpb25zOiBEZWxldGVWZXJzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVZlcnNpb25zKFxuICB0aGlzOiBNb25nb29zZUFkYXB0ZXIsXG4gIHsgY29sbGVjdGlvbiwgbG9jYWxlLCByZXEgPSB7fSBhcyBQYXlsb2FkUmVxdWVzdCwgd2hlcmUgfSxcbikge1xuICBjb25zdCBWZXJzaW9uc01vZGVsID0gdGhpcy52ZXJzaW9uc1tjb2xsZWN0aW9uXVxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIC4uLihhd2FpdCB3aXRoU2Vzc2lvbih0aGlzLCByZXEpKSxcbiAgICBsZWFuOiB0cnVlLFxuICB9XG5cbiAgY29uc3QgcXVlcnkgPSBhd2FpdCBWZXJzaW9uc01vZGVsLmJ1aWxkUXVlcnkoe1xuICAgIGxvY2FsZSxcbiAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWQsXG4gICAgd2hlcmUsXG4gIH0pXG5cbiAgYXdhaXQgVmVyc2lvbnNNb2RlbC5kZWxldGVNYW55KHF1ZXJ5LCBvcHRpb25zKVxufVxuIl0sIm5hbWVzIjpbImRlbGV0ZVZlcnNpb25zIiwiY29sbGVjdGlvbiIsImxvY2FsZSIsInJlcSIsIndoZXJlIiwiVmVyc2lvbnNNb2RlbCIsInZlcnNpb25zIiwib3B0aW9ucyIsIndpdGhTZXNzaW9uIiwibGVhbiIsInF1ZXJ5IiwiYnVpbGRRdWVyeSIsInBheWxvYWQiLCJkZWxldGVNYW55Il0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsIm1hcHBpbmdzIjoiOzs7OytCQU9hQTs7O2VBQUFBOzs7NkJBRmU7QUFFckIsTUFBTUEsaUJBQWlDLGVBQWVBLGVBRTNELEVBQUVDLFVBQVUsRUFBRUMsTUFBTSxFQUFFQyxNQUFNLENBQUMsQ0FBbUIsRUFBRUMsS0FBSyxFQUFFO0lBRXpELE1BQU1DLGdCQUFnQixJQUFJLENBQUNDLFFBQVEsQ0FBQ0wsV0FBVztJQUMvQyxNQUFNTSxVQUFVO1FBQ2QsR0FBSSxNQUFNQyxJQUFBQSx3QkFBVyxFQUFDLElBQUksRUFBRUwsSUFBSTtRQUNoQ00sTUFBTTtJQUNSO0lBRUEsTUFBTUMsUUFBUSxNQUFNTCxjQUFjTSxVQUFVLENBQUM7UUFDM0NUO1FBQ0FVLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1FBQ3JCUjtJQUNGO0lBRUEsTUFBTUMsY0FBY1EsVUFBVSxDQUFDSCxPQUFPSDtBQUN4QyJ9